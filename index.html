<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1 id="con"></h1>
    
</body>
<script>
    let data=[
  {
    "text":"textOne",
    "dateTime":"2022-03-19 12:51:00"
},
{
    "text":"textTwo",
    "dateTime":"2022-03-19 12:51:20"
},
{
    "text":"textThree",
    "dateTime":"2022-03-19 12:51:50"
},
{
    "text":"textFour",
    "dateTime":"2022-03-19 08:58:35"
},
{
    "text":"textFive",
    "dateTime":"2022-03-19 08:44:00"
},
{
    "text":"textSix",
    "dateTime":"2022-03-19 08:45:30"
},
{
    "text":"textSeven",
    "dateTime":"2022-03-19 08:46:10"
},
{
    "text":"textEight",
    "dateTime":"2022-03-19 08:47:27"
},
{
    "text":"textNine",
    "dateTime":"2022-03-19 17:33:00"
},
{
    "text":"textTen",
    "dateTime":"2022-03-19 21:53:00"
}

]

//console.log(data)
//check at each 10 milisec for main function 
// async function getData(){
//         let res=await fetch(`http://localhost:3000/api/data`);
//         let data=await res.json();
         
//         return data.data
        
//     }
   // let data=getData()
   // console.log(data)
  
  let interval=setInterval(()=>{
    //getData()
    mainFunction()
},200)



 function mainFunction()

 {
    
     data.forEach((e)=>{
    
       //if match to time refresh interval 
        if(formattimeandDate()==e.dateTime){
            //console.log("hello")
            
    name = e.text;
    
    //print reverse event name 
     reverseOutput(name)
     clearInterval(interval)
            
            
        }     
    
})
 }
 //for compare two date and time without miliseconds
function formattimeandDate(){
    now = new Date();
    if((now.getMonth()+1) < 10){
        month = "0"+(now.getMonth()+1)
    }
    else{
        month=(now.getMonth()+1)
    }

    if(now.getDate()<10){
        date = "0"+ now.getDate()
    }
    else{
        date = now.getDate()
    }

   if(now.getHours()<10){
       hrs = "0"+now.getHours()
   }
   else{
       hrs  = now.getHours()
   }

   if(now.getMinutes()<10){
       mins = "0"+ now.getMinutes()
   }
   else{
       mins = now.getMinutes()
   }

   if(now.getSeconds()<10) {
       sec = "0" + now.getSeconds()
   }
   else{
       sec = now.getSeconds()
   }

   presentDate = now.getFullYear()+'-'+month+'-'+date;


   presentTime = hrs+":"+mins+":"+sec;

   return (presentDate+" "+presentTime);
}

function reverseOutput(name){
   // console.log(name)
    var n=name.length
    var output=""
    for(i=n-1;i>=0;i--){
        output+=name[i]
    }
    const timerp=setTimeout(()=>{
        console.log(output)
        var ret=document.getElementById("con")
        ret.innerText=output
        //aviod interval to set 0
        interval=setInterval(mainFunction,10)
    },n*1000)
}

</script>
</html>
